const k={};function x(e){return e?String(e).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;"):""}function _(e){if(!e)return"#";try{const a=new URL(e,window.location.origin);return["http:","https:","data:"].includes(a.protocol.toLowerCase())||a.origin===window.location.origin?a.href:"#"}catch{return"#"}}function B(){const e=document.getElementById("menuToggle"),a=document.getElementById("menuClose"),t=document.getElementById("navMenu");!e||!a||!t||(e.addEventListener("click",()=>{t.classList.toggle("translate-x-full"),t.classList.toggle("translate-x-0")}),a.addEventListener("click",()=>{t.classList.remove("translate-x-0"),t.classList.add("translate-x-full")}))}function I(){const e=document.documentElement,a=document.getElementById("themeToggle"),t=document.getElementById("themeToggleMobile"),d=()=>{const n=localStorage.getItem("theme");n==="dark"||!n&&window.matchMedia("(prefers-color-scheme: dark)").matches?e.setAttribute("data-theme","dark"):e.setAttribute("data-theme","light"),c()},c=()=>{const n=e.getAttribute("data-theme"),s=n==="dark"?"fa-moon":"fa-sun",o=n==="dark"?"Dark Theme":"Light Theme";if(a){a.innerHTML="";const r=document.createElement("i");r.className=`fa-solid ${s}`,a.appendChild(r)}if(t){t.innerHTML="";const r=document.createElement("i");r.className=`fa-solid ${s}`,t.appendChild(r),t.appendChild(document.createTextNode(` ${x(o)}`))}};d(),[a,t].forEach(n=>{n&&n.addEventListener("click",()=>{const o=e.getAttribute("data-theme")==="dark"?"light":"dark";e.setAttribute("data-theme",o),localStorage.setItem("theme",o),c()})})}function b(e=document){const a=e.querySelectorAll(".nav-link");if(!a||a.length===0)return;const t=n=>{a.forEach(s=>s.classList.remove("nav-link-active")),n&&n.classList.add("nav-link-active")};a.forEach(n=>{n._hasActiveHandler||(n.addEventListener("click",()=>t(n)),n._hasActiveHandler=!0)});const d=window.location.pathname.replace(/^\/+/,"").split("?")[0].split("#")[0],c=Array.from(a).find(n=>{let s=n.getAttribute("href");if(!s){const o=n.dataset.path;if(!o)return!1;s=(typeof import.meta<"u"&&k?"/Luminara/":"/")+o}try{return new URL(s,document.baseURI).pathname.replace(/^\/+/,"").split("?")[0].split("#")[0]===d}catch{return s.replace(/^\/+/,"").split("?")[0].split("#")[0]===d}});t(c)}function A(){const e=document.getElementById("supportBtn"),a=document.getElementById("supportPopup");!e||!a||(e.addEventListener("click",()=>{a.classList.toggle("hidden")}),document.addEventListener("click",t=>{!a.contains(t.target)&&t.target!==e&&a.classList.add("hidden")}))}async function C(e="Luminara"){const a={"index.html":"Home","heroes.html":"Heroes","hero_details.html":"Hero Profile","commanders.html":"Commanders","extras.html":"Extras","audio.html":"Audio","portrait.html":"Portrait","splashart.html":"Splashart","ui_asset.html":"UI Asset","mlbb_model_viewer.html":"Model Viewer"},t=window.location.pathname.split("/").pop();let d=a[t]?`${e} | ${a[t]}`:e;const c="/Luminara/",n=new URLSearchParams(window.location.search);try{if(t==="hero_details.html"){const s=(n.get("id")||"").replace(/[^a-zA-Z0-9_\-.]/g,"");if(s){const r=(await(await fetch(`${c}data/heroes_index.json`)).json()).heroes.find(m=>m.id===s);if(r){const m=await(await fetch(`${c}data/heroes/${r.details_file}`)).json();d=`${e} | ${m.name||"Hero Profile"}`}}}else if(t==="audio.html"){const s=n.get("hero")||"",o=n.get("skin")||"",r=[e];s&&r.push(s),o&&r.push(o),d=r.join(" | ")}else if(t==="mlbb_model_viewer.html"){const s=(n.get("id")||"").replace(/[^a-zA-Z0-9_\-.]/g,""),o=(n.get("skin_id")||"").replace(/[^a-zA-Z0-9_\-.]/g,"");if(s){const m=(await(await fetch(`${c}data/heroes_index.json`)).json()).heroes.find(i=>i.id===s);if(m){const i=await(await fetch(`${c}data/heroes/${m.details_file}`)).json(),f=Object.values(i.skins||{}).find(y=>y.skin_id===o)||{};d=[e,i.name,f.name].filter(Boolean).join(" | ")}}}}catch(s){console.warn("Could not fetch data for title:",s)}document.title=x(d)}async function T(){const e=document.getElementById("searchOverlay"),a=document.getElementById("searchBox"),t=document.getElementById("searchInput"),d=document.getElementById("closeSearch"),c=document.getElementById("searchResults"),n=document.getElementById("searchHelperText"),s=document.getElementById("openSearch"),o="/Luminara/";if(!e||!t||!c)return;s?.addEventListener("click",()=>{e.classList.remove("hidden"),t.focus()});const r=()=>{e.classList.add("hidden"),t.value="",c.innerHTML="",n?.classList.remove("hidden")};d?.addEventListener("click",r),e.addEventListener("click",i=>{a.contains(i.target)||r()});let m=[];try{m=(await(await fetch(`${o}data/heroes_index.json`)).json()).heroes||[]}catch(i){console.error("Failed to fetch heroes index:",i)}t.addEventListener("input",async()=>{const i=t.value.trim().toLowerCase();if(c.innerHTML="",i)n?.classList.add("hidden");else{n?.classList.remove("hidden");return}const h=m.filter(l=>l.name.toLowerCase().startsWith(i));if(h.length===0){const l=document.createElement("p");l.textContent="No heroes found.",l.className="text-sm text-muted text-center mt-2",c.appendChild(l);return}const f=h.map(async l=>{try{return await(await fetch(`${o}data/heroes/${l.details_file}`)).json()}catch{return null}});(await Promise.all(f)).filter(Boolean).forEach(l=>{Object.values(l.skins||{}).forEach(g=>{const u=document.createElement("a");u.href=`${o}mlbb_model_viewer.html?id=${encodeURIComponent(l.id)}&skin_id=${encodeURIComponent(g.skin_id)}&model_type=in_game`,u.className="flex items-center gap-3 p-2 rounded-lg transition-all duration-200 transform hover:bg-background/50 hover:shadow-lg";const p=document.createElement("img");p.src=g.avatars?.default||"",p.alt=l.name,p.className="w-12 h-12 rounded-full object-cover border border-primary";const v=document.createElement("div"),L=document.createElement("p");L.textContent=l.name,L.className="font-semibold text-text";const E=document.createElement("p");E.textContent=g.name,E.className="text-sm text-muted",v.appendChild(L),v.appendChild(E),u.appendChild(p),u.appendChild(v),c.appendChild(u)})})})}export{I as a,B as b,b as c,A as d,x as e,C as f,T as g,_ as s};
